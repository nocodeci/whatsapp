# ğŸ“± WhatsApp MCP Server avec n8n

Un serveur MCP (Model Context Protocol) complet pour intÃ©grer WhatsApp avec n8n, permettant de crÃ©er des assistants IA automatisÃ©s pour WhatsApp.

## ğŸ¯ FonctionnalitÃ©s

- âœ… **Serveur MCP natif** pour n8n avec support des nÅ“uds MCP natifs
- âœ… **API REST** pour intÃ©gration avec d'autres outils
- âœ… **Webhook automatique** pour dÃ©clencher des workflows n8n sur rÃ©ception de messages
- âœ… **Dashboard web** pour visualiser les conversations
- âœ… **Support des mÃ©dias** (images, vidÃ©os, audio, documents)
- âœ… **Messages interactifs** (boutons convertis en options numÃ©rotÃ©es)
- âœ… **IntÃ©gration IA** avec OpenAI GPT-4 via n8n

## ğŸ“‹ PrÃ©requis

- **Docker** et **Docker Compose** installÃ©s
- **Git** pour cloner le repository
- Un compte **WhatsApp** (numÃ©ro de tÃ©lÃ©phone)
- (Optionnel) Un compte **n8n Cloud** ou n8n installÃ© localement

## ğŸš€ Installation Rapide

### 1. Cloner le Repository

```bash
git clone <URL_DU_REPO>
cd whatsapp-mcp-n8n
```

### 2. Configurer l'Environnement

```bash
# Copier le fichier d'exemple
cp .env.example .env

# Ã‰diter .env et ajouter votre URL de webhook n8n (optionnel)
nano .env
```

### 3. DÃ©marrer les Services

```bash
# DÃ©marrer tous les services
docker compose up -d

# Voir les logs pour obtenir le QR code
docker compose logs -f whatsapp-bridge
```

### 4. Scanner le QR Code

1. Ouvrez WhatsApp sur votre tÃ©lÃ©phone
2. Allez dans **ParamÃ¨tres** â†’ **Appareils liÃ©s** â†’ **Lier un appareil**
3. Scannez le QR code affichÃ© dans les logs
4. Attendez la confirmation "âœ… WhatsApp connectÃ© !"

## ğŸ“– Documentation ComplÃ¨te

- **[Guide d'Installation pour Ã‰tudiants](GUIDE_INSTALLATION_ETUDIANTS.md)** - Instructions dÃ©taillÃ©es pas Ã  pas
- **[Guide QR Code](GUIDE_QR_CODE_ETUDIANTS.md)** - Comment scanner le QR code et rÃ©soudre les problÃ¨mes
- **[Guide n8n MCP](GUIDE_MCP_NATIF_N8N.md)** - Configuration des nÅ“uds MCP dans n8n
- **[Guide Webhook](GUIDE_WEBHOOK_MESSAGES.md)** - Configuration des webhooks pour recevoir des messages
- **[Guide Workflow Complet](GUIDE_WORKFLOW_COMPLET.md)** - Exemple de workflow complet avec IA

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   WhatsApp      â”‚
â”‚   (TÃ©lÃ©phone)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WhatsApp Bridge â”‚  â† Go (whatsmeow)
â”‚   (Port 8081)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP    â”‚ â”‚   Dashboard   â”‚
â”‚ Server  â”‚ â”‚   (Port 8000) â”‚
â”‚(Port    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ 9000)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   n8n   â”‚
â”‚(Port    â”‚
â”‚ 5678)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Services Docker

- **whatsapp-bridge** : Bridge Go pour WhatsApp (port 8081)
- **whatsapp-mcp-server** : Serveur MCP Python (ports 8000, 9000)
- **n8n** : Plateforme d'automatisation (port 5678)

## ğŸ“ Utilisation

### Envoyer un Message via API

```bash
curl -X POST http://localhost:8081/api/send \
  -H "Content-Type: application/json" \
  -d '{
    "recipient": "2250703324674",
    "message": "Bonjour !"
  }'
```

### AccÃ©der au Dashboard

Ouvrez votre navigateur : http://localhost:8000

### AccÃ©der Ã  n8n

Ouvrez votre navigateur : http://localhost:5678
- Utilisateur : `admin`
- Mot de passe : `admin`

## ğŸ”— IntÃ©gration avec n8n

### MÃ©thode 1 : NÅ“uds MCP Natifs (RecommandÃ©)

Utilisez les nÅ“uds natifs `MCP Client` et `MCP Server Trigger` dans n8n.

Voir : [GUIDE_MCP_NATIF_N8N.md](GUIDE_MCP_NATIF_N8N.md)

### MÃ©thode 2 : API REST

Utilisez les nÅ“uds HTTP Request dans n8n pour appeler l'API REST.

Voir : [GUIDE_N8N_MCP.md](GUIDE_N8N_MCP.md)

## ğŸ“ Pour les Ã‰tudiants

Si vous Ãªtes Ã©tudiant et que vous venez de cloner ce projet, suivez ces guides :

1. **[Guide d'Installation](GUIDE_INSTALLATION_ETUDIANTS.md)** - Commencez ici !
2. **[Guide QR Code](GUIDE_QR_CODE_ETUDIANTS.md)** - Comment connecter WhatsApp
3. **[Guide n8n](GUIDE_MCP_NATIF_N8N.md)** - Comment utiliser avec n8n

## ğŸ› DÃ©pannage

### Le QR code n'apparaÃ®t pas

```bash
# VÃ©rifier les logs
docker compose logs whatsapp-bridge

# RedÃ©marrer le service
docker compose restart whatsapp-bridge
```

### Le webhook ne fonctionne pas

1. VÃ©rifiez que `N8N_WEBHOOK_URL` est configurÃ© dans `.env`
2. VÃ©rifiez que le workflow n8n est activÃ©
3. Consultez : [DIAGNOSTIC_WEBHOOK.md](DIAGNOSTIC_WEBHOOK.md)

### Les messages ne sont pas reÃ§us

1. VÃ©rifiez que WhatsApp est bien connectÃ© (QR code scannÃ©)
2. VÃ©rifiez les logs : `docker compose logs whatsapp-bridge`
3. Testez l'envoi d'un message depuis un autre tÃ©lÃ©phone

## ğŸ“š Ressources

- [Documentation MCP](https://modelcontextprotocol.io/)
- [Documentation n8n](https://docs.n8n.io/)
- [Documentation whatsmeow](https://github.com/tulir/whatsmeow)

## ğŸ“„ Licence

Voir le fichier [LICENSE](whatsapp-mcp/LICENSE) pour plus de dÃ©tails.

## ğŸ¤ Contribution

Les contributions sont les bienvenues ! N'hÃ©sitez pas Ã  ouvrir une issue ou une pull request.

## ğŸ“§ Support

Pour toute question ou problÃ¨me :
1. Consultez la documentation dans le dossier `docs/`
2. Ouvrez une issue sur GitHub
3. Contactez votre professeur

---

**Bon dÃ©veloppement ! ğŸš€**
